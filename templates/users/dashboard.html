{% extends '../base.html' %}

{% load static %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - WorkSpace</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 20px;
        }
        .section {
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 20px;
        }
        .section h2 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="section">
            <h2>Your Work Completion Forms</h2>
            <ul class="list-group">
                {% for form in user_forms %}
                <li class="list-group-item">
                    <strong>OMC:</strong> {{ form.omc }} <br>
                    <strong>Time Commenced:</strong> {{ form.time_commenced }} <br>
                    <strong>Time Completed:</strong> {{ form.time_completed }} <br>
                    <strong>Duration:</strong> {{ form.duration }} <br>
                    <a href="{% url 'work_completion_list' %}" class="btn btn-primary btn-sm">View All</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="section">
            <h2>Your Incident Reports</h2>
            <ul class="list-group">
                {% for incident in user_incidents %}
                <li class="list-group-item">
                    <strong>Site:</strong> {{ incident.site }} <br>
                    <strong>Date and Time:</strong> {{ incident.date_time }} <br>
                    <strong>Incident Type:</strong> {{ incident.incident_type }} <br>
                    <a href="{% url 'incident_report_list' %}" class="btn btn-primary btn-sm">View All</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="section">
            <h2>Your Documents</h2>
            <ul class="list-group">
                {% for document in user_documents %}
                <li class="list-group-item">
                    <strong>Title:</strong> {{ document.title }} <br>
                    <strong>Category:</strong> {{ document.get_category_display }} <br>
                    <a href="{{ document.file.url }}" class="btn btn-primary btn-sm" download>Download</a>
                    <a href="{% url 'document_list' %}" class="btn btn-primary btn-sm">View All</a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <script src="{% static 'js/jquery-3.5.1.slim.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
{% endblock %}

